<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Elevator GUI</title>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&display=swap"
    rel="stylesheet"
  />
  <style>
    .lit-up {
      box-shadow: 0 0 25px 10px #f0c97d, inset 0 0 20px #fff !important;
      transform: scale(1.1) !important;
      transition: all 0.3s ease;
    }

    .floor-button:hover:not(.lit-up),
    .control-button:hover:not(.lit-up),
    .icon-button:hover:not(.lit-up) {
      transform: scale(1.05);
      box-shadow: 0 0 20px #f0c97d, inset 0 0 10px #000;
    }

    body {
      background: url('Images/metal.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Cinzel', serif;
      color: #f0e6d2;
    }

    #current-floor {
      background-color: black;
      color: red;
      border: 2px solid black;
      border-radius: 10px;
      padding: 10px;
      font-weight: bold;
      font-size: 24px;
      max-width: 80px;
      margin: 0 auto 20px;
      text-align: center;
      text-shadow: 1px 1px #440000;
    }

    .floor-button {
      width: 100px;
      font-size: 24px;
      margin: 10px auto;
      padding: 15px;
      background: radial-gradient(circle at 30% 30%, #c4a35a, #7a5c1d);
      color: #fff;
      border: 4px solid #4b3621;
      border-radius: 12px;
      box-shadow: 0 0 10px #8b6f47, inset 0 0 5px #000;
      display: block;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .control-button {
      font-size: 20px;
      white-space: nowrap;
      line-height: 1;
      text-align: center;
      vertical-align: middle;
      margin: 10px;
      padding: 15px;
      background: radial-gradient(circle at 30% 30%, #c4a35a, #7a5c1d);
      color: #fff;
      border: 4px solid #4b3621;
      border-radius: 50%;
      box-shadow: 0 0 10px #8b6f47, inset 0 0 5px #000;
      width: 80px;
      height: 80px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .floor-button:hover,
    .control-button:hover,
    .icon-button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #f0c97d, inset 0 0 10px #000;
    }

    /* Updated music and mic buttons to match control-button style */
    #music-button,
    #mic-button {
      font-size: 24px;
      margin: 10px;
      padding: 15px;
      background: radial-gradient(circle at 30% 30%, #c4a35a, #7a5c1d);
      color: #fff;
      border: 4px solid #4b3621;
      border-radius: 50%;
      box-shadow: 0 0 10px #8b6f47, inset 0 0 5px #000;
      width: 80px;
      height: 80px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    #music-button:hover,
    #mic-button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #f0c97d, inset 0 0 10px #000;
    }

    .icon-button {
      font-size: 24px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    h1 {
      text-align: center;
      margin-top: 30px;
      font-size: 48px;
      text-shadow: 2px 2px #000;
    }

    main {
      text-align: center;
      margin-top: 40px;
    }

    .youtube-section iframe {
      border: 6px solid #4b3621;
      border-radius: 10px;
      box-shadow: 0 0 15px #8b6f47;
    }
  </style>
</head>
<body>
  <div class="container">
    <main>
      
      
      <div class="mb-3">
        <label for="current-floor" class="form-label">Floor:</label><br />
        <input type="text" id="current-floor" readonly value="3" />
      </div>

      <!-- Floor buttons stacked vertically -->
      <div>
        <button class="floor-button">3</button>
        <button class="floor-button">2</button>
        <button class="floor-button">1</button>
      </div>

      <!-- Control buttons -->
      <div class="my-3">
        <button class="control-button" id="open-door">â‰« â‰ª</button>
        <button class="control-button" id="close-door">â‰ª â‰«</button>
      </div>

      <!-- Music & mic buttons -->
      <div class="my-3">
        <button class="control-button" id="music-button">ðŸŽµ</button>
        <button class="control-button" id="mic-button">ðŸŽ¤</button>
      </div>

      <!-- Embedded video 
      <div class="youtube-section text-center">
        <iframe
          width="300"
          height="169"
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="YouTube video player"
          frameborder="0"
          allowfullscreen
        ></iframe>
      </div>
    -->
    </main>
  

  </div>

  <!-- Audio -->
  <audio id="ding-sound" src="ding.mp3" preload="auto"></audio>
  <audio id="door-open" src="ElevatorOpeningFinal.mp3" preload="auto"></audio>
  <audio id="door-click" src="ElevatorButtonFinal.mp3" preload="auto"></audio>
  <audio id="door-close" src="ElevatorOpeningFinal.mp3" preload="auto"></audio>
  <audio id="screech-sound" src="screeching.mp3" preload="auto"></audio>

  <script>
    // Function to get URL parameter by name
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    const floorDisplay = document.getElementById('current-floor');

    // Get the floor from URL or default to 3
    const floorFromUrl = getQueryParam('floor') || '3';

    // Update the current floor display input value
    floorDisplay.value = floorFromUrl;

    const floorButtons = document.querySelectorAll('.floor-button');
    const dingSound = document.getElementById('ding-sound');
    const openSound = document.getElementById('door-open');
    const clickSound = document.getElementById('door-click');
    const closeSound = document.getElementById('door-close');
    const screechSound = document.getElementById('screech-sound');

    // Play click sound on any button click
    const allButtons = document.querySelectorAll('button');
    allButtons.forEach((button) => {
      button.addEventListener('click', () => {
        if (clickSound) {
          clickSound.currentTime = 0;
          clickSound.play();
        }
      });
    });

    floorButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const selectedFloor = button.textContent.trim();
        const currentFloor = floorDisplay.value.trim();

        if (!isNaN(selectedFloor)) {
          if (selectedFloor !== currentFloor) {
            // Play door-click sound first
            if (clickSound) {
              clickSound.pause();
              clickSound.currentTime = 0;
              clickSound.play();
            }

            // After door-click ends, play screech sound for 5 seconds, then ding sound
            clickSound.onended = () => {
              if (screechSound) {
                screechSound.pause();
                screechSound.currentTime = 0;
                screechSound.volume = 1; // low volume
                screechSound.play();

                // After 5 seconds, stop screech and play ding
                setTimeout(() => {
                  screechSound.pause();
                  if (dingSound) {
                    dingSound.currentTime = 0;
                    dingSound.play();
                  }
                }, 5000);
              }
            };

            // Update floor display immediately
            floorDisplay.value = selectedFloor;
          }
        }
      });
    });

    document.getElementById('open-door').addEventListener('click', () => {
      setTimeout(() => {
        if (openSound) {
          openSound.currentTime = 0;
          openSound.play();
        }
      }, 1000);
    });

    document.getElementById('close-door').addEventListener('click', () => {
      setTimeout(() => {
        if (closeSound) {
          closeSound.currentTime = 0;
          closeSound.play();
        }
      }, 1000);
    });

    document.querySelectorAll('button').forEach((button) => {
      button.addEventListener('click', () => {
        button.classList.add('lit-up');

        // Remove the effect after 5 seconds
        setTimeout(() => {
          button.classList.remove('lit-up');
        }, 5000);
      });
    });
  </script>
</body>
</html>
