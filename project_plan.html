<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project Plan - Project VI</title>
  <meta name="description" content="Live project plan and milestones for Project VI Group 4." />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="author" content="Alan Hosseinpour" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <link rel="stylesheet" href="css/site_style.css" />
  <style>
    /* Basic styling for the commit history section */
    .commit-item {
      border: 1px solid #e0e0e0;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      background-color: #f9f9f9;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .commit-item p {
      margin: 5px 0;
      line-height: 1.5;
    }
    .commit-item strong {
      color: #333;
    }
    .commit-item a {
      color: #0366d6;
      text-decoration: none;
    }
    .commit-item a:hover {
      text-decoration: underline;
    }
    #commit-history-section h2 {
        margin-top: 3rem;
        margin-bottom: 1.5rem;
    }
  </style>
</head>
<body>

  <main class="container my-5">
    <h2 class="mb-4">üìã Project VI ‚Äì Group 4 Project Plan</h2>

    <p class="lead">
      This page contains our live project plan for Project VI, shared through Google Sheets.
      It outlines the schedule, assigned tasks, and project milestones. Each group member also maintains their own individual log book.
    </p>

    <div class="ratio ratio-16x9 mb-4">
      <iframe
        src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRY-b45omQPjsEWErLN6aaPm4vXTtE1JgvOBYg7KqWHkKy0EgLrCyXVV-r_fSwtwgNjlPTugBMfHp_n/pubhtml?widget=true&amp;headers=false"
        title="Project VI Group 4 Google Sheet Project Plan"
        style="border: none;"
        allowfullscreen>
      </iframe>
    </div>

    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
      <a href="https://github.com/users/kyledavid36/projects/4" target="_blank" style="
        display: inline-block;
        padding: 12px 20px;
        background-color: #24292e;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-family: sans-serif;">
        üöÄ View My Project Roadmap on GitHub
      </a>

      <a href="index.html" class="btn btn-primary" style="display: inline-block; padding: 12px 20px;">
        üè† Return to Home Page
      </a>
    </div>

    ---

    <section id="commit-history-section">
        <h2>Recent GitHub Commit History</h2>
        <div id="commit-history">
            <p>Loading commit history...</p>
        </div>
    </section>

  </main>

  <footer class="text-center mt-5 mb-3 text-muted small">
    <p>&copy; 2025 Alan Hosseinpour. All rights reserved.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const username = 'kyledavid36'; // Your GitHub username
      const repo = 'KA_Project_VI'; // Your GitHub repository name
      const apiUrl = `https://api.github.com/repos/${username}/${repo}/commits`;
      const commitHistoryDiv = document.getElementById('commit-history');

      fetch(apiUrl)
          .then(response => {
              if (!response.ok) {
                  // If the response is not OK (e.g., 403 Forbidden for rate limit, 404 Not Found)
                  throw new Error(`GitHub API error: ${response.status} ${response.statusText}`);
              }
              return response.json();
          })
          .then(data => {
              if (data.length === 0) {
                  commitHistoryDiv.innerHTML = '<p>No commits found for this repository.</p>';
                  return;
              }
              commitHistoryDiv.innerHTML = ''; // Clear "Loading" message

              // Display only the latest 5 commits for brevity
              const commitsToDisplay = data.slice(0, 5);

              commitsToDisplay.forEach(commit => {
                  const commitDiv = document.createElement('div');
                  commitDiv.classList.add('commit-item');

                  const sha = commit.sha.substring(0, 7); // Shorten SHA for display
                  const author = commit.commit.author ? commit.commit.author.name : 'Unknown Author';
                  const date = commit.commit.author ? new Date(commit.commit.author.date).toLocaleString() : 'Unknown Date';
                  const message = commit.commit.message.split('\n')[0]; // Take only the first line of the commit message
                  const commitUrl = commit.html_url; // Link to the commit on GitHub

                  commitDiv.innerHTML = `
                      <p><strong>Commit:</strong> <a href="${commitUrl}" target="_blank">${sha}</a></p>
                      <p><strong>Author:</strong> ${author}</p>
                      <p><strong>Date:</strong> ${date}</p>
                      <p><strong>Message:</strong> ${message}</p>
                  `;
                  commitHistoryDiv.appendChild(commitDiv);
              });
          })
          .catch(error => {
              console.error('Error fetching commit history:', error);
              commitHistoryDiv.innerHTML = `<p>Error loading commit history: ${error.message}. Please try again later or check the console.</p>`;
          });
    });
  </script>
</body>
</html>